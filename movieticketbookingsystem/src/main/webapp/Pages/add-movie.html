<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Movie</title>
        <link rel="stylesheet" href="../css/bootstrap.css">
    <script src="../js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div class="container mt-5">
        <h1>Add Movie</h1>
        <form id="addMovieForm">
            <div class="mb-3">
                <label for="movieName" class="form-label">Movie Name</label>
                <input type="text" class="form-control" id="movieName" required>
            </div>
            <div class="mb-3">
                <label for="duration" class="form-label">Duration (minutes)</label>
                <input type="number" class="form-control" id="duration" required>
            </div>
            <div class="mb-3">
                <label for="rating" class="form-label">Rating</label>
                <input type="number" class="form-control" id="rating" step="0.1" max="10" required>
            </div>
            <div class="mb-3">
                <label for="releaseDate" class="form-label">Release Date</label>
                <input type="date" class="form-control" id="releaseDate" required>
            </div>
            <div class="mb-3">
                <label for="genre" class="form-label">Genre</label>
                <select class="form-select" id="genre" required>
                    <option value="ACTION">ACTION</option>
                    <option value="COMEDY">COMEDY</option>
                    <option value="DRAMA">DRAMA</option>
                    <option value="THRILLER">THRILLER</option>
                    <option value="ROMANTIC">ROMANTIC</option>
                    <option value="HISTORICAL">HISTORICAL</option>
                    <option value="ANIMATION">ANIMATION</option>
                    <option value="SPORTS">SPORTS</option>
                    <option value="SPORTS">SOCIAL</option>
                    <option value="WAR">WAR</option>

                    </select>
            </div>
            <div class="mb-3">
                <label for="language" class="form-label">Language</label>
                <select class="form-select" id="language" required>
                    <option value="ENGLISH">ENGLISH</option> 
                    <option value="SPANISH">SPANISH</option>
                    <option value="FRENCH">FRENCH</option>
                    <option value="JAPANESE">JAPANESE</option>
                    <option value="KOREAN">KOREAN</option>
                    <option value="GERMAN">GERMAN</option>
                    <option value="RUSSIAN">RUSSIAN</option>
                    <option value="ARABIC">ARABIC</option>
                  </select>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>
    <script >

        // Add Movie
document.addEventListener("DOMContentLoaded", function () {
  document.getElementById("addMovieForm").addEventListener("submit", async function (event) {
    event.preventDefault();

    const movieName = document.getElementById("movieName").value;
    const duration = document.getElementById("duration").value;
    const rating = document.getElementById("rating").value;
    const releaseDate = document.getElementById("releaseDate").value;
    const genre = document.getElementById("genre").value;
    const language = document.getElementById("language").value;

    try {
      const requestBody = {
        movieName,
        duration,
        rating,
        releaseDate,
        genre,
        language
      };

      const response = await fetch("http://localhost:8099/movie/addNew", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + localStorage.getItem("authToken")
        },
        body: JSON.stringify(requestBody)
      });

     
      const responseData = await response.json();
      console.log("Movie added successfully:", responseData);
      alert("Movie added successfully!");
      window.location.href = "movie_dashboard.html"; 

    } catch (error) {
      
    }
  });
});
    </script>
</body>

</html>